# Autoinstall configuration
version: 1

# Storage configuration with LVM
storage:
  layout:
    name: lvm

# Kernel override
#REMOVE kernel:
#REMOVE  package: linux-server
# possible linux-generic

# Language, locale, and timezone settings
locale: en_US.UTF-8
timezone: UTC

#DELETE  language: en_US
#DETELE country: US

# Network configuration
network:
  version: 2
  ethernets:
    enp0s3:
      dhcp4: true

# possibly enp0s3

identity:
    realname: 'Ubuntu ONA User'
    username: ona-ubuntu
    password: '$y$j9T$vTPss2y8DIwI64Qhspa2u1$0WErBalivR6wnQ82NIMmjzQDEEr7m6vfsESbVLzgwa1'
    hostname: ona-default

# default password: 'ona-ubuntu'

# Package installation
packages:
  - apt-transport-https
  - iptables-persistent
  - ipset
  - libjansson4
  - libltdl7
  - liblzo2-2
  - libnet1
  - libyaml-0-2
  - nano
  - ntp
  - ntpdate
  - snmp
  - tcpdump

# Tasksel
#DELETE tasks:
#DELETE  - server

# Custom configuration scripts
late-commands:
  - cp -r /cdrom/ona/ /target/root/
  - chroot /target chmod +x /root/ona/configure.sh
  - chroot /target bash /root/ona/configure.sh

# System settings
debconf:
  quiet: false
  splash: false
  pkgsel:
    install_language_support: false

# GRUB timeout
#grub:
#  timeout: 2

# iptables-persistent settings
early-commands:
  - echo 'iptables-persistent iptables-persistent/autosave_v6 boolean false' | debconf-set-selections
  - echo 'iptables-persistent iptables-persistent/autosave_v4 boolean false' | debconf-set-selections

# OEM configuration
#oem-config:
#  steps:
#    - language
#    - timezone
#    - keyboard
#    - user
#    - network
#    - tasks
